"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");if(!e)return void alert("Форма не найдена на странице.");e.querySelector('button[type="submit"]');function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function r(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function n(e){return!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value.trim())}e.addEventListener("submit",(async function(a){a.preventDefault();let s=function(e){let a=0,s=document.querySelectorAll("._req");for(let e=0;e<s.length;e++){const o=s[e];r(o),o.classList.contains("_email")?n(o)&&(t(o),alert("Введите корректный email."),a++):"checkbox"!==o.getAttribute("type")||o.checked?""===o.value.trim()&&(t(o),alert(`Поле "${o.name}" не должно быть пустым.`),a++):(t(o),alert("Необходимо согласиться с условиями."),a++)}return a}(),o=new FormData(e);if(0===s){const t=document.querySelector(".data");t&&t.classList.add("_sending");try{const t=await fetch("https://api.web3forms.com/submit",{method:"POST",body:o});if(t.ok){await t.json();alert("Поздравляем, ваше письмо отправлено и скоро будет прочитано"),e.reset()}else{const e=await t.text();alert(`Ошибка отправки данных: ${e}`)}}catch(e){console.error("Ошибка при отправке:",e),alert("Ошибка при отправке. Попробуйте позже.")}finally{t.classList.remove("_sending")}}else alert("Заполните обязательные поля.")}))}));